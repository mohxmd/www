---
import type { ComponentProps } from "astro/types";
import Text from "./text.astro";

type Props = Omit<ComponentProps<typeof Text<"time">>, "as"> & {
  value?: Date;
  itemprop?: string;
};

const { value, itemprop, ...props } = Astro.props;
---

<Text {...props} as="time" datetime={value?.toISOString()} itemprop={itemprop}>
  {
    value &&
      value.toLocaleDateString("en-US", {
        month: "2-digit",
        day: "2-digit",
        year: "numeric",
        timeZone: "UTC",
      })
  }
  <slot />
  {itemprop && value && <meta itemprop={itemprop} content={value.toISOString()} />}
</Text>
